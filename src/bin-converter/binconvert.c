/*! *******************************************************************************************************
* Copyright (c) 2017 Horváth Kristóf Szabolcs
*
* Minden jog fenntartva
*
* \file binconvert.c
*
* \brief Binary to raw CD converter functions
*
* \author Horváth Kristóf Sz.
*
**********************************************************************************************************/

//--------------------------------------------------------------------------------------------------------/
// Include files
//--------------------------------------------------------------------------------------------------------/
#include "types.h"


//--------------------------------------------------------------------------------------------------------/
// Definíciók
//--------------------------------------------------------------------------------------------------------/
#define CD_RAW_SECTOR_SIZE  2352u


//--------------------------------------------------------------------------------------------------------/
// Típusok
//--------------------------------------------------------------------------------------------------------/


//--------------------------------------------------------------------------------------------------------/
// Globális változók
//--------------------------------------------------------------------------------------------------------/


//--------------------------------------------------------------------------------------------------------/
// Belsõ függvények deklarációi
//--------------------------------------------------------------------------------------------------------/


//--------------------------------------------------------------------------------------------------------/
// Belsõ függvények
//--------------------------------------------------------------------------------------------------------/


//--------------------------------------------------------------------------------------------------------/
// Kívülrõl hívható függvények
//--------------------------------------------------------------------------------------------------------/
/*! *******************************************************************
 * \brief Convert CD sector binary to pits and lands
 * \param pu8ArrayToConvert: array of 2352 bytes!
 * \param pu8ArrayResult: array of 2352 bytes!
 * \return TRUE, if success; FALSE if not
 *********************************************************************/
void BinConvert_CDSector2352( U8* pu8ArrayToConvert, U8* pu8ArrayResult )
{
    U16 u16Index;
    U8  u8BitIndex;
    U8  u8State = 1;

    for( u16Index = 0; u16Index < CD_RAW_SECTOR_SIZE/4; u16Index++ )
    {
        pu8ArrayResult[ u16Index ] = 0;
        for( u8BitIndex = 0; u8BitIndex < 8; u8BitIndex++ )  //TODO: probably there is a faster way to do this...
        {
            if( 0 != (pu8ArrayToConvert[ u16Index ] & (1<<u8BitIndex)) )
            {
                u8State ^= 1;
            }
            pu8ArrayResult[ u16Index ] |= u8State<<u8BitIndex;
        }
    }
}


 /*! *******************************************************************
 * \brief
 * \param
 * \return
 *********************************************************************/

